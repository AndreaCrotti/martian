<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Remote graphs</title>
		<meta name="description" content="">
		<meta name="author" content="Oliver Hine">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-species-style" content="black-translucent" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/moon.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

    <link rel="stylesheet" href="css/martian.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section data-background-image="img/curiosity.jpg" style="text-align: left;">
          <h1>Remote graphs</h1>
          <p style="color: white;">Oliver Hine</p>
          <br/><br/><br/><br/><br/><br/><br/>
          <div style="text-align: center; vertical-align: bottom; bottom: 0;">
            <a style="color: white" class="github" target="_blank" href="https://github.com/oliyh/martian">
              <img class="logo" src="img/github.png"/>
              oliyh/martian
            </a>
          </div>
          <aside class="notes">
          </aside>
        </section>

        <section>
          <h2>Networking</h2>
          <img class="stretch" src="img/seven-layers.jpg"/>
          <aside class="notes">
            I'm not going to talk about networking. All you need to know is that there are seven layers or something, but the important part is that each layer
            hides the complexities of the layer below. As an app developer I don't really know what they do, and it doesn't really matter.
          </aside>
        </section>


        <section>
          <h2>HTTP</h2>
          <pre><code class="hljs" data-trim>
(defn create-pet []
  (http/post "https://api.com/create-pet/dog"))
          </code></pre>
          <aside class="notes">
            I know about HTTP because that's the interface I have to program against to talk to the world. It can look pretty simple...
          </aside>
        </section>

        <section>
          <img class="stretch" src="img/sweet.jpg"/>
          <aside class="notes">
          </aside>
        </section>

        <section>
          <h2>HTTP</h2>
          <pre><code class="hljs" data-trim>
(defn create-pet [metrics host port creds species name age]
  (timing metrics "create-pet"
    (http/post (format "https://%s:%s/create-pet/%s" host port species)
               {:as :json
                :query-params {:age age}
                :body (json/encode {:name name))
                :headers {"Content-Type" "application/json"
                          "Authorization" (str "Token" creds)}})))
          </code></pre>
          <aside class="notes">
            ... but you pretty rapidly uncover a lot of complexities.
          </aside>
        </section>

        <section>
          <img class="stretch" src="img/i-double-dare-you.jpg"/>
          <aside class="notes">
            I don't want this leaking into my application code, the same as I don't want database drivers and credentials either.
          </aside>
        </section>

        <section>
          <h2>Describe</h2>
          <pre><code class="hljs" data-trim>
{:route-name :create-pet
 :produces ["application/xml"]
 :consumes ["application/xml"]
 :path-parts ["/pets/" :species]
 :method :post
 :path-schema {:species Species}
 :body-schema {:pet {:id   s/Int
                     :name s/Str}}
          </code></pre>
          <aside class="notes">
            I want to be able to describe these remote services (or even better, they describe themselves) and let something else handle the details...
          </aside>
        </section>


        <section>
          <h2>Call</h2>
          <pre><code class="hljs" data-trim>
              (martian/response-for m :create-pet {:name "Charlie"
                                     :species "Dog"
                                     :age 3})
          </code></pre>
          <aside class="notes">
            ... so that I can just call them like functions.
            This is a library called Martian, and like the layers of networking it hides all the complexity that has no relevance to the layer above it.
          </aside>
        </section>

        <section>
          <h2>Call stacks as data</h2>
          <br/>
          <img class="stretch" src="img/martian-call-stack-auth-timing.png"/>
          <aside class="notes">
            Martian exposes its call stack as a chain of interceptors, meaning adding any aspect - like metrics or authentication - doesn't pollute your business
            level code either.
          </aside>
        </section>

        <section>
          <h2>All gone!</h2>
          <br/>
          <img class="stretch" src="img/banksy-sweep.jpg"/>
          <aside class="notes">
            What else can we do?
          </aside>
        </section>

        <section>
          <h2>What if...</h2>
          <br/>
          <img class="stretch" src="img/bored-elon-musk.png"/>
          <aside class="notes">
            Let's build this.
          </aside>
        </section>

        <section>
          <h2>Fetches</h2>
          <br/>
          <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="681px" version="1.1" content="&lt;mxfile userAgent=&quot;Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/66.0.3359.181 Safari/537.36&quot; version=&quot;8.7.7&quot; editor=&quot;www.draw.io&quot; type=&quot;device&quot;&gt;&lt;diagram id=&quot;5ca0d537-4f53-13bc-809f-bd52606a6326&quot; name=&quot;Page-1&quot;&gt;5VtLk+MmEP41Om5KAj3s49i7mxySqq3MYbNHLDGSMtg4CI09+fVBFuiBsMvr0cuxfbBoQQs+PjXdDbbgenv8laF98geNMLGAHR0t+NkCwIHeUvwUkvdSEkBYCmKWRrJSLXhO/8VSaEtpnkY4a1XklBKe7tvCkO52OOQtGWKMHtrVXihpP3WPYtwRPIeIdKXf04gnUup7bn3jN5zGiXq048sRb1D4GjOa7+QDLQBfTp/y9hYpZXKkWYIiemiI4BcLrhmlvLzaHteYFOAq3Mp2X8/crTrO8I5f1SAoW7whkmPV5VPH+LtCA++ipwJUUQoJyrI0tOAq4VsiBI64FI9i73+Jgv0L8FT5R1EuCseUl/c8Wfohm2Wc0dcKX1BIFBhFw5eUkDUllJ06UaAIwrBq1rhj21/FR9wpO46jztzWYEhRRnMWyloSAI5YjFUtt5oJQXFMt1gMSNQ51Fzw5PwlDRYoGcME8fSt3QskKRlX6qonfKOp6B+w5evj+VKPfHlAYLdVlL2XrZpzqynyoddS5ABNUTnmjiJx0Rh2LTpRx0wj2GURfIopjQn+FNLtNufYKp7uE4HVasPEVVxcWcFKVBQPSmhUVvgnL6i/+o7Ia12ygs+GtjpPT68djiS9DknK8fMeneb5IOxUm7Syw5hxfLxMly4PVINle6IcW5YbPKkwbxLFt89zojUJFxB3+0b8W74h4s2eOebehJB7fUO+RmzueEM4IeC+CfA9jUKU8U9hgsTiT7IZguYGE4JmWNBr0PA+zWjhWvUMmrZYRx5eRK5psV6ADfT9gWBejAjz4nFgXmgwL0eEefk4MGveBBjTaKjA64ypZTgSo0hR/9b2ai8/8je+N5DhAGMi7TwS0r4zIdLgEtIv6E2EUQKxOToQOmyjOhAw6Iy/iKmfZXFHd+JnVUNia9mAswF/I08QdPIEf2PO32UmCOWcChFlwmOO6Q6R3yndW7PKGjgy/mqmDSAwT+rV+YCrmd0N/p5OFSS5swsEtn/eUnjF14Shf/r0ZZPbyQpoMBXGrEsvpsIQ2nXegeuzYPeXBFP2pkln3zxf4yTB9NyKq0/ztUkw4GqKHE1Rf0kwxxCvPhSL/C6JgilJ5IO2TVneyCFdjzMghwxx5UNxSPnHrXz8mYV1GhZVej9KI+gORyND3PwBGnXdtfnzCBh4NOm+jr4d0/Fcbt3XgToh++MRMEarKuc9XrC6CLGZJZuF53r2MLnuMYNV9X4+BNDehDhf3Kn8n+GsO9GjAm3YoHwoR0aNt7kATXuuQAuEbnVjKsro+wEDLD+PHpcrc9VKM01JIn3ybw2pOiQaLqQybSM/FokMIZU3KYnOHSr4aRbpigY84eRfcABuSYF3j8rdWQrcdHJutBS44ZhDmQKXB3HuMQXu6IkGw67PYClw04GGD1jJOzwIatjRmTZ92ZvDZmuKdHPb41rbR95p7kQx+GTTEqXjTN16YthZLtoWaDivTK3cwzDlYu5yJjTy5kYj4PdEI13RkDQCHRr9ibOc8Dtc/4F20M51h1v/RbH+k0mJe/1XHvjlPw==&lt;/diagram&gt;&lt;/mxfile&gt;" onclick="(function(svg){var src=window.event.target||window.event.srcElement;while (src!=null&amp;&amp;src.nodeName.toLowerCase()!='a'){src=src.parentNode;}if(src==null){if(svg.wnd!=null&amp;&amp;!svg.wnd.closed){svg.wnd.focus();}else{var r=function(evt){if(evt.data=='ready'&amp;&amp;evt.source==svg.wnd){svg.wnd.postMessage(decodeURIComponent(svg.getAttribute('content')),'*');window.removeEventListener('message',r);}};window.addEventListener('message',r);svg.wnd=window.open('https://www.draw.io/?client=1&amp;lightbox=1&amp;edit=_blank');}}})(this);" viewBox="0 0 681 481" style="cursor:pointer;max-width:100%;max-height:481px;"><defs/><g transform="translate(0.5,0.5)"><path d="M 480 220 L 487.18 291.8" fill="none" stroke="#00ffff" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 487.78 297.78 L 483 290.21 L 487.18 291.8 L 490.96 289.42 Z" fill="#00ffff" stroke="#00ffff" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><rect x="140" y="80" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(151.5,96.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="96" height="26" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 98px; white-space: nowrap; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">:google-commute <br />{:method "Walk"}<br /></div></div></foreignObject><text x="48" y="19" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><rect x="0" y="80" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(11.5,96.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="96" height="26" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 98px; white-space: nowrap; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">:google-commute <br />{:method "Public"}<br /></div></div></foreignObject><text x="48" y="19" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><rect x="280" y="80" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(291.5,96.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="96" height="26" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 98px; white-space: nowrap; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">:google-commute <br />{:method "Car"}<br /></div></div></foreignObject><text x="48" y="19" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">:google-commute &lt;br&gt;{:method "Car"}&lt;br&gt;</text></switch></g><rect x="420" y="80" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(430.5,103.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="98" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 98px; white-space: nowrap; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">:podcast-channels<br /></div></div></foreignObject><text x="49" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">:podcast-channels&lt;br&gt;</text></switch></g><rect x="420" y="160" width="120" height="60" rx="9" ry="9" fill="#d5e8d4" stroke="#82b366" pointer-events="none"/><g transform="translate(430.5,183.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="98" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 98px; white-space: nowrap; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">:podcast-episodes<br /></div></div></foreignObject><text x="49" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">:podcast-episodes&lt;br&gt;</text></switch></g><rect x="430" y="170" width="120" height="60" rx="9" ry="9" fill="#d5e8d4" stroke="#82b366" pointer-events="none"/><g transform="translate(440.5,193.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="98" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 98px; white-space: nowrap; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">:podcast-episodes<br /></div></div></foreignObject><text x="49" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">:podcast-episodes&lt;br&gt;</text></switch></g><rect x="440" y="180" width="120" height="60" rx="9" ry="9" fill="#d5e8d4" stroke="#82b366" pointer-events="none"/><g transform="translate(450.5,203.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="98" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 98px; white-space: nowrap; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">:podcast-episodes<br /></div></div></foreignObject><text x="49" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">:podcast-episodes&lt;br&gt;</text></switch></g><rect x="420" y="0" width="120" height="60" rx="9" ry="9" fill="#fff2cc" stroke="#d6b656" pointer-events="none"/><g transform="translate(425.5,23.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="108" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 108px; white-space: nowrap; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">:podcast-credentials<br /></div></div></foreignObject><text x="54" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">:podcast-credentials&lt;br&gt;</text></switch></g><rect x="560" y="0" width="120" height="60" rx="9" ry="9" fill="#fff2cc" stroke="#d6b656" pointer-events="none"/><g transform="translate(565.5,23.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="108" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 108px; white-space: nowrap; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">:podcast-credentials<br /></div></div></foreignObject><text x="54" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">:podcast-credentials&lt;br&gt;</text></switch></g><rect x="560" y="80" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(568.5,103.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="102" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 102px; white-space: nowrap; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">:podcast-favourites<br /></div></div></foreignObject><text x="51" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">:podcast-favourites&lt;br&gt;</text></switch></g><path d="M 550 360 L 425.5 416.59" fill="none" stroke="#00ffff" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 420.04 419.07 L 425.66 412.12 L 425.5 416.59 L 428.97 419.41 Z" fill="#00ffff" stroke="#00ffff" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><rect x="425" y="300" width="250" height="60" fill="#f5f5f5" stroke="#666666" pointer-events="none"/><g transform="translate(517.5,323.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="64" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 66px; white-space: nowrap; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">All podcasts</div></div></foreignObject><text x="32" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">All podcasts</text></switch></g><path d="M 480 60 L 480 71.76" fill="none" stroke="#00ffff" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 480 77.76 L 476 69.76 L 480 71.76 L 484 69.76 Z" fill="#00ffff" stroke="#00ffff" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 480 140 L 480 151.76" fill="none" stroke="#00ffff" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 480 157.76 L 476 149.76 L 480 151.76 L 484 149.76 Z" fill="#00ffff" stroke="#00ffff" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 620 60 L 620 71.76" fill="none" stroke="#00ffff" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 620 77.76 L 616 69.76 L 620 71.76 L 624 69.76 Z" fill="#00ffff" stroke="#00ffff" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 620 140 L 613.36 291.77" fill="none" stroke="#00ffff" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 613.1 297.77 L 609.45 289.6 L 613.36 291.77 L 617.44 289.95 Z" fill="#00ffff" stroke="#00ffff" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><rect x="280" y="0" width="120" height="60" rx="9" ry="9" fill="#f8cecc" stroke="#b85450" pointer-events="none"/><g transform="translate(288.5,23.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="102" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 102px; white-space: nowrap; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">:google-credentials<br /></div></div></foreignObject><text x="51" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">:google-credentials&lt;br&gt;</text></switch></g><rect x="0" y="0" width="120" height="60" rx="9" ry="9" fill="#f8cecc" stroke="#b85450" pointer-events="none"/><g transform="translate(8.5,23.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="102" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 102px; white-space: nowrap; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">:google-credentials<br /></div></div></foreignObject><text x="51" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">:google-credentials&lt;br&gt;</text></switch></g><rect x="140" y="0" width="120" height="60" rx="9" ry="9" fill="#f8cecc" stroke="#b85450" pointer-events="none"/><g transform="translate(148.5,23.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="102" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 102px; white-space: nowrap; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">:google-credentials<br /></div></div></foreignObject><text x="51" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">:google-credentials&lt;br&gt;</text></switch></g><path d="M 60 60 L 60 71.76" fill="none" stroke="#00ffff" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 60 77.76 L 56 69.76 L 60 71.76 L 64 69.76 Z" fill="#00ffff" stroke="#00ffff" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 200 60 L 200 71.76" fill="none" stroke="#00ffff" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 200 77.76 L 196 69.76 L 200 71.76 L 204 69.76 Z" fill="#00ffff" stroke="#00ffff" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 340 60 L 340 71.76" fill="none" stroke="#00ffff" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 340 77.76 L 336 69.76 L 340 71.76 L 344 69.76 Z" fill="#00ffff" stroke="#00ffff" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 200 240 L 289.22 412.68" fill="none" stroke="#00ffff" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 291.97 418.01 L 284.75 412.74 L 289.22 412.68 L 291.86 409.07 Z" fill="#00ffff" stroke="#00ffff" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><rect x="75" y="180" width="250" height="60" fill="#f5f5f5" stroke="#666666" pointer-events="none"/><g transform="translate(163.5,203.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="72" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 74px; white-space: nowrap; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">All commutes</div></div></foreignObject><text x="36" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">All commutes</text></switch></g><path d="M 60 140 L 130.67 176.24" fill="none" stroke="#00ffff" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 136.01 178.98 L 127.07 178.89 L 130.67 176.24 L 130.72 171.77 Z" fill="#00ffff" stroke="#00ffff" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 200 140 L 200 171.76" fill="none" stroke="#00ffff" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 200 177.76 L 196 169.76 L 200 171.76 L 204 169.76 Z" fill="#00ffff" stroke="#00ffff" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 340 140 L 270.31 176.2" fill="none" stroke="#00ffff" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 264.98 178.97 L 270.24 171.73 L 270.31 176.2 L 273.93 178.83 Z" fill="#00ffff" stroke="#00ffff" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><rect x="230" y="420" width="250" height="60" fill="#f5f5f5" stroke="#666666" pointer-events="none"/><g transform="translate(337.5,443.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="34" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 36px; white-space: nowrap; word-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">Result</div></div></foreignObject><text x="17" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">Result</text></switch></g></g></svg>
          <aside class="notes">
            How would we organise these fetches?
            Some are duplicated.
            Some can be done in parallel.
            Some depend on each other.
            We could solve some of these issues using promise chaining or core.async but we'd need a lot of
            plumbing code, and refactoring could be difficult.
          </aside>
        </section>

        <section>
          <h2>Muse</h2>
          <pre><code class="hljs" data-trim>
(->Request :get-pet {:id 123})
          </code></pre>

          <aside class="notes">
            Here's a library called Urania that will let us ascend to the next level.
            We can create a request building block like this...
          </aside>
        </section>

        <section>
          <h2>Dependent muse</h2>
          <pre><code class="hljs" data-trim>
(->> (->Request :get-pet {:id 123})
(u/mapcat (fn [pet]
             ;; some dependent thing)))
          </code></pre>

          <aside class="notes">
            And describe dependencies like this. This builds an AST of the dependencies of the graph.
          </aside>
        </section>

        <section>
          <h2>Execution</h2>
          <pre><code class="hljs" data-trim>
              (u/run! muse)
          </code></pre>

          <aside class="notes">
            Because we've described the whole graph before executing it, Urania can do several things at execution time:
            Identify duplicates (same operation / arguments)
            Parallelise (when two or more muses have no interdependencies)
            Batch calls together if a bulk endpoint exists that can handle them
          </aside>
        </section>

        <section>
          <h2>Refactoring</h2>
          ????

          <aside class="notes">
            Urania makes refactoring really easy because you can compose any muse with any other muse.
            This lets you build reusable building blocks and combine them in any way you wish.
          </aside>
        </section>

        <section>
          <h2>Graphs</h2>
          ????

          <aside class="notes">
            The area I'm applying this to is building a GraphQL facade over a large number of midi REST services.
            Currently to build a UI for the system requires talking to at least several of these services and joining the
            results of many calls together to form a view that makes sense. The aim is for UIs to be very easy and simple to write,
            and possibly even serverless.
          </aside>
        </section>


				<section data-background-image="img/curiosity-tracks.jpg" style="text-align: left;">
          <h1>Thanks</h1>
          <br/><br/><br/><br/><br/><br/><br/>
          <div style="text-align: center; vertical-align: bottom; bottom: 0;">
            <a style="color: white" class="github" target="_blank" href="https://github.com/oliyh/martian">
              <img class="logo" src="img/github.png"/>
              oliyh/martian
            </a>
          </div>
          <div style="text-align: center; vertical-align: bottom; bottom: 0;">
            <a style="color: white" class="github" target="_blank" href="https://github.com/funcool/urania">
              <img class="logo" src="img/github.png"/>
              funcool/urania
            </a>
          </div>

          <aside class="notes">
            Thanks
            Questions?
          </aside>
        </section>

			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
			history: true,
      margin: 0,

				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});

      // setTimeout(window.location.reload.bind(window.location), 5000);
		</script>
	</body>
</html>
